var AssetAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var s=RES.getRes(t);s?n(s):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},n.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){t.prototype.createChildren.call(this);var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},n.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},n.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},n.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},n.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},n.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},n.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},n.startCreateScene=function(){this.addChild(ViewControl.getInstance()),ViewControl.getInstance().start()},e}(eui.UILayer);egret.registerClass(Main,"Main");var ThemeAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getTheme=function(t,e,i,n){function s(t){e.call(n,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT)},t}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var ViewControl=function(t){function e(){t.call(this),this.loginView=new Login,this.registerView=new Register,this.playerStage=new PlayerStage}__extends(e,t);var i=(__define,e),n=i.prototype;return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},n.start=function(){this.addEventListener(GameEvents.GAME_EVENTS,this.onGameEvents,this),this.initData()},n.initData=function(){this.player=this.loginView,this.addChild(this.player)},n.onGameEvents=function(t){switch(t.eventType){case GameEvents.REGISTER_VIEW:this.player=this.registerView;break;case GameEvents.PLAYER_STAGE:this.player=this.playerStage;break;case GameEvents.LOGIN_VIEW:this.player=this.loginView}this.removeChildren(),this.addChild(this.player)},n.dispatch=function(t,e){var i=new GameEvents(GameEvents.GAME_EVENTS);i.eventType=t,i.eventObj=e,this.dispatchEvent(i)},e.instance=null,e}(eui.UILayer);egret.registerClass(ViewControl,"ViewControl");var GlobalData=function(){function t(){}var e=(__define,t);e.prototype;return t.stageW=640,t.stageH=1136,t.userInfo={uid:"",authkey:"",mobile:""},t.playerInitData={},t.playerStars={},t.playerUserInfo={},t.playerTips={},t.token={},t.urlLogin="http://www.boofa.com.cn/app/index.php?i=4&c=auth&a=login&datatype=json",t.urlRegister="http://www.boofa.com.cn/app/index.php?i=4&datatype=json&c=auth&a=register&datatype=json",t.urlGetCode="http://www.boofa.com.cn/web/index.php?i=4&c=utility&a=verifycode",t.urlPlayerInit="http://www.boofa.com.cn/app/index.php?i=4&c=entry&do=catch&m=hnjiangzhong&datatype=json",t.urlCatch="http://www.boofa.com.cn/app/index.php?i=4&c=entry&op=analyse&do=catch&m=hnjiangzhong&type=0",t}();egret.registerClass(GlobalData,"GlobalData");var GameAudio=function(){function t(t,e){void 0===e&&(e=!0),this.sourceName=null,this.isEffect=null,this.channel=null,this.audioIsPlaying=!1,this.sourceName=t,this.isEffect=e,this.init()}var e=(__define,t),i=e.prototype;return i.init=function(){this.sound=RES.getRes(this.sourceName),this.isEffect?this.sound.type=egret.Sound.EFFECT:this.sound.type=egret.Sound.MUSIC},i.isPlaying=function(){return this.audioIsPlaying},i.play=function(t){void 0===t&&(t=0),this.channel=this.sound.play(0,t),this.channel.addEventListener(egret.Event.COMPLETE,this.onAudioComp,this),this.audioIsPlaying=!0},i.onAudioComp=function(){this.channel&&this.channel.hasEventListener(egret.Event.COMPLETE)&&(this.channel.removeEventListener(egret.Event.COMPLETE,this.onAudioComp,this),this.audioIsPlaying=!1)},i.stop=function(){this.channel.stop(),this.channel.position=0,this.channel=null},i.updateVolume=function(t){var e=0;t>=0&&1>=t?e=t:0>t?e=0:t>1&&(e=1),this.channel.volume=e},t}();egret.registerClass(GameAudio,"GameAudio");var GameEvents=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n),this.eventType="",this.eventObj=""}__extends(e,t);var i=(__define,e);i.prototype;return e.GAME_EVENTS="GAME_EVENTS",e.REGISTER_VIEW="REGISTER_VIEW",e.LOGIN_VIEW="LOGIN_VIEW",e.FIND_PSD_VIEW="FIND_PSD_VIEW",e.PLAYER_STAGE="PLAYER_STAGE",e}(egret.Event);egret.registerClass(GameEvents,"GameEvents");var HttpEvents=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n),this.eventType="",this.eventObj=""}__extends(e,t);var i=(__define,e);i.prototype;return e.HTTP_EVENTS="HTTP_EVENTS",e}(egret.Event);egret.registerClass(HttpEvents,"HttpEvents");var Http=function(t){function e(e,i){void 0===i&&(i=egret.HttpMethod.POST),t.call(this),this._url=e,this._type=i,this.init()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(){this._request=new egret.HttpRequest,this._request.responseType=egret.HttpResponseType.TEXT,this._request.open(this._url,this._type),this._request.setRequestHeader("Content-Type","application/json;charset=UTF-8"),this._request.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),this._request.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this),this._request.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this)},n.send=function(t){void 0===t&&(t=null),this._request.send(t)},n.onPostComplete=function(t){var e=t.currentTarget,i=e.response;console.log("receive",i);var n=new HttpEvents(HttpEvents.HTTP_EVENTS);n.eventObj=i,n.eventType=HttpEvents.HTTP_EVENTS,this.dispatchEvent(n)},n.onPostIOError=function(t){console.log("post error : "+t);var e=new HttpEvents(HttpEvents.HTTP_EVENTS);e.eventObj=JSON.stringify({error:"error"}),e.eventType=HttpEvents.HTTP_EVENTS,this.dispatchEvent(e)},n.onPostProgress=function(t){console.log("post progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%");var e=new HttpEvents(HttpEvents.HTTP_EVENTS);e.eventObj=JSON.stringify({error:"error"}),e.eventType=HttpEvents.HTTP_EVENTS,this.dispatchEvent(e)},e}(egret.Sprite);egret.registerClass(Http,"Http");var Utils;!function(t){function e(t){var e=/^(13[0-9]|14[57]|15[012356789]|17[0678]|18[0-9])\d{8}$/;return e.test(""+t)?!0:!1}function i(t){var e=t.replace(/^\s+|\s+$/g,"");return e.length<6||e.length>20?!1:!0}function n(t){var e=/^[0-9]*[1-9][0-9]*$/;return e.test(t)?!0:!1}function s(t){}t.isPhoneNumber=e,t.isPsd=i,t.isInt=n,t.getCookies=s}(Utils||(Utils={}));var ItemRenderer=function(t){function e(){t.call(this),this.skinName="MyItemRendererSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.childrenCreated=function(){t.prototype.childrenCreated.call(this)},n.onAddedToStage=function(){console.log("added");var t=this.stage.stageWidth,e=Math.floor(170*t/640),i=Math.floor(360*t/640),n=(Math.floor(110*t/640),Math.floor(90*t/640));this.itemCenterFourBg.width=n,this.itemCenterThreeBg.width=n,this.itemCenterTwoBg.width=n,this.itemCenterOneBg.width=n,this.itemCenterThreeBg.left=n,this.itemCenterTwoBg.left=2*n,this.itemCenterOneBg.left=3*n,this.itemCenterFour.left=Math.floor(37*t/640),this.itemCenterThree.left=Math.floor(127*t/640),this.itemCenterTwo.left=Math.floor(217*t/640),this.itemCenterOne.left=Math.floor(307*t/640),this.itemLeftGroup.width=e,this.itemCenterGroup.x=e,this.itemCenterGroup.width=i,this.itemRightGroup.x=e+i,this.validateNow()},n.onRemovedFromStage=function(){},n.dataChanged=function(){this.data.order&&(this.periodId.text=""+this.data.order,this.sumId.text=""+this.data.he,this.itemCenterFour.text=""+this.data.num7,this.itemCenterThree.text=""+this.data.num6,this.itemCenterTwo.text=""+this.data.num5,this.itemCenterOne.text=""+this.data.num4,this.itemRightThree.text=""+this.data.num3,this.itemRightTwo.text=""+this.data.num2,this.itemRightOne.text=""+this.data.num1)},e}(eui.ItemRenderer);egret.registerClass(ItemRenderer,"ItemRenderer");var Login=function(t){function e(){t.call(this),this.isGetCoding=!1,this.isPsdLogin=!0,this.isLogining=!1,this.skinName="LoginSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddedToStage=function(){console.log("added")},n.onRemovedFromStage=function(){},n.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.left=0,this.right=0,this.top=0,this.bottom=0,console.log("created"),this.loginLoginLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLogin,this),this.loginLoginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLogin,this),this.loginNoticeCont.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onChangeLoginWay,this),this.loginRegiterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRegister,this),this.loginFogetPsdBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFindPsd,this),this.loginPsdInput.addEventListener(egret.Event.FOCUS_IN,this.onFocusIn,this),this.loginPhoneInput.addEventListener(egret.Event.FOCUS_IN,this.onFocusIn,this)},n.onFocusIn=function(t){this.loginErrorNotice.text=""},n.onLogin=function(t){if(!Utils.isPhoneNumber(Number(this.loginPhoneInput.text))||!Utils.isPsd(this.loginPsdInput.text)||this.isLogining)return this.loginErrorNotice.text="手机号或者密码错误",!1;var e="basic";this.isPsdLogin,e="basic";var i={mode:"basic",password:""+this.loginPsdInput.text,username:""+this.loginPhoneInput.text},n=new Http(GlobalData.urlLogin);n.send(JSON.stringify(i)),n.addEventListener(HttpEvents.HTTP_EVENTS,this.onComplete,this),this.loginErrorNotice.text="登录中...",this.isLogining=!0},n.onComplete=function(t){this.loginErrorNotice.text="",this.isLogining=!1,console.log("请求成功");var e=JSON.parse(t.eventObj),i=e.result,n=e.status;if(0==n){GlobalData.userInfo=JSON.parse(i);var s=GlobalData.userInfo,r=s.uid,o=s.authkey,a=Date.now().toString(),h=(new md5).hex_md5(""+r+a+o);GlobalData.token="&uid="+r+"&autht="+a+"&auths="+h,egret.localStorage.removeItem("token"),egret.localStorage.setItem("token",GlobalData.token),ViewControl.getInstance().dispatch(GameEvents.PLAYER_STAGE,this)}else this.loginErrorNotice.text=i},n.onChangeLoginWay=function(t){this.isPsdLogin?(this.isPsdLogin=!1,this.loginNoticeCont.text="用密码登录",this.loginGetCode.visible=!0,this.loginPsdInput.prompt="请输入验证码"):(this.isPsdLogin=!0,this.loginNoticeCont.text="用验证码登录",this.loginGetCode.visible=!1,this.loginPsdInput.prompt="请输入密码")},n.onRegister=function(t){ViewControl.getInstance().dispatch(GameEvents.REGISTER_VIEW,this)},n.onFindPsd=function(t){},e}(eui.Component);egret.registerClass(Login,"Login");var PlayerStage=function(t){function e(){t.call(this),this.catchStartTime=0,this.catchEndTime=0,this.distanceTime=2e3,this.isCatching=!1,this.isRequestCatchInfoing=!1,this.skinName="PlayerStageSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.childrenCreated=function(){t.prototype.childrenCreated.call(this),console.log("created"),this.left=0,this.right=0,this.top=0,this.bottom=0;var e=[{}];egret.localStorage.getItem("playerStageRecords")&&(e=JSON.parse(egret.localStorage.getItem("playerStageRecords"))),this.playerDataList.dataProvider=new eui.ArrayCollection(e),this.playerDataList.itemRenderer=ItemRenderer,this.playerDataScroller.viewport=this.playerDataList,this.playerDataList.useVirtualLayout=!0,this.playerDataScroller.bounces=!1},n.onAddedToStage=function(){console.log("added"),this.init()},n.init=function(){this.playerCatchBtnMask.touchEnabled=!1,this.onRankList(null),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.playerCatchBtnLabel.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCatchBegin,this),this.playerCatchBtnLabel.addEventListener(egret.TouchEvent.TOUCH_END,this.onCatchEnd,this),this.playerCatchBtnLabel.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onCatchStop,this),this.playerCatchBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCatchBegin,this),this.playerCatchBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onCatchEnd,this),this.playerCatchBtn.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onCatchStop,this),this.playerRankList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRankList,this),this.playerCatchLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCatchLabel,this),this.playerMine.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMine,this),this.requestInitInfo()},n.onRemovedFromStage=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.playerCatchBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCatchBegin,this),this.playerCatchBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onCatchEnd,this),this.playerCatchBtn.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onCatchStop,this),this.playerCatchBtnLabel.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCatchBegin,this),this.playerCatchBtnLabel.removeEventListener(egret.TouchEvent.TOUCH_END,this.onCatchEnd,this),this.playerCatchBtnLabel.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onCatchStop,this),this.playerRankList.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRankList,this),this.playerCatchLabel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCatchLabel,this),this.playerMine.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMine,this)},n.onCatchBegin=function(t){console.log("catchbegin"),this.catchStartTime=egret.getTimer(),this.isCatching=!0,this.playerCatchBtnMask.visible=!0,this.playerCatchBtnLabel.text="正在抓奖..."},n.onCatchEnd=function(t){console.log("catchend"),this.catchEndTime=egret.getTimer();var e=this.catchEndTime-this.catchStartTime;e>this.distanceTime||(this.isCatching=!1,this.playerCatchBtnMask.mask=null,this.playerCatchBtnMask.visible=!1,this.playerCatchBtnLabel.text="抓住按钮不放手")},n.onCatchStop=function(){console.log("catchstop"),this.isCatching=!1,this.playerCatchBtnMask.mask=null,this.playerCatchBtnMask.visible=!1,this.playerCatchBtnLabel.text="抓住按钮不放手"},n.onEnterFrame=function(t){var e=egret.getTimer()-this.catchStartTime;if(e>this.distanceTime&&!this.isRequestCatchInfoing&&this.isCatching)return void this.requestCatchInfo();if(this.isCatching&&this.playerCatchBtn.visible){var i=this.playerCatchBtn.x,n=this.playerCatchBtn.y,s=this.playerCatchBtn.height,r=this.playerCatchBtn.width,o=Math.ceil(e*r/2e3);this.playerCatchBtnMask.mask=new egret.Rectangle(0,0,o,s),console.log("x",i,"y",n)}},n.onRankList=function(t){this.normalBottomGroup(),this.playerRankList.source="rankListActive_png"},n.onCatchLabel=function(t){this.normalBottomGroup(),this.playerCatchLabel.source="catchLabelActive_png",this.playerCatchGroup.visible=!0},n.onMine=function(t){this.normalBottomGroup(),this.playerMine.source="mineActive_png"},n.normalBottomGroup=function(){this.playerRankList.source="rankListNormal_png",this.playerMine.source="mineNormal_png",this.playerCatchLabel.source="catchLabelNormal_png",this.playerCatchGroup.visible=!1},n.requestCatchInfo=function(){this.isRequestCatchInfoing=!0;var t=new Http(GlobalData.urlCatch+GlobalData.token,egret.HttpMethod.GET);t.addEventListener(HttpEvents.HTTP_EVENTS,this.onCatchInfoComp,this),t.send(JSON.stringify(""))},n.requestInitInfo=function(){var t=egret.localStorage.getItem("token");t&&(GlobalData.token=t);var e=new Http(GlobalData.urlPlayerInit+GlobalData.token,egret.HttpMethod.GET);e.addEventListener(HttpEvents.HTTP_EVENTS,this.onInitInfoComp,this),e.send(JSON.stringify(""))},n.onInitInfoComp=function(t){if(console.log(t.eventObj),t.eventObj.indexOf("error")>-1)return!1;var e=JSON.parse(t.eventObj),i=e.records,n=e.userinfo,s=e.nums;GlobalData.playerInitData=e,GlobalData.playerStars=s,GlobalData.playerUserInfo=n,this.playerDataList.dataProvider=new eui.ArrayCollection(i),this.playerDataList.itemRenderer=ItemRenderer,this.playerDataScroller.viewport=this.playerDataList,this.playerDataList.useVirtualLayout=!0,this.playerDataScroller.bounces=!1;var r=n.mobile,o=n.realname,a=n.gold;this.playerTopPhoneLabel.text=r,this.playerTopInfoLabel.text=o,this.playerUserGoldNum.text=a+"个",egret.localStorage.removeItem("playerStageRecords"),egret.localStorage.setItem("playerStageRecords",JSON.stringify(i)),egret.localStorage.removeItem("playerUserInfo"),egret.localStorage.setItem("playerUserInfo",JSON.stringify(n))},n.onCatchInfoComp=function(t){this.isRequestCatchInfoing=!1,this.onCatchStop();var e=JSON.parse(t.eventObj),i=e.result,n=e.status;console.log("抓奖结果",i),0==n&&this.dealNums(i.nums)},n.dealNums=function(t){var e=this.onDealNums(t),i=e[0],n=e[1],s=e[2],r=e[3],o=this.findCenterLabel(i),a=this.findCenterLabel(n),h=this.findCenterLabel(s),l=this.findCenterLabel(r);this.kiloCenterLabel.text=o.forecast,this.hundredsCenterLabel.text=a.forecast,this.tenCenterLabel.text=h.forecast,this.unitCenterLabel.text=l.forecast},n.onDealNums=function(t){var e,i,n,s,r=t.concat(),o=r[0],a=r[1],h=r[2],l=r[3],d=Object.keys(o),c=Object.keys(a),E=Object.keys(h),u=Object.keys(l);return"0"==o[d[0]].pos?e=o:"1"==o[d[0]].pos?i=o:"2"==o[d[0]].pos?n=o:"3"==o[d[0]].pos&&(s=o),"0"==a[c[0]].pos?e=a:"1"==a[c[0]].pos?i=a:"2"==a[c[0]].pos?n=a:"3"==a[c[0]].pos&&(s=a),"0"==h[E[0]].pos?e=h:"1"==h[E[0]].pos?i=h:"2"==h[E[0]].pos?n=h:"3"==h[E[0]].pos&&(s=h),"0"==l[u[0]].pos?e=l:"1"==l[u[0]].pos?i=l:"2"==l[u[0]].pos?n=l:"3"==l[u[0]].pos&&(s=l),[e,i,n,s]},n.findCenterLabel=function(t){var e,i=Object.keys(t),n=t[i[0]];if(1==i.length)return n;for(var s=1;s<i.length;s++)e=t[i[s]],Number(n.star)<Number(e.star)&&(n=e);return n},e}(eui.Component);egret.registerClass(PlayerStage,"PlayerStage");var Register=function(t){function e(){t.call(this),this.isGetingCode=!1,this.disNum=60,this.DIS_TIME=1e3,this.startTime=0,this.skinName="RegisterSkin",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.left=0,this.right=0,this.top=0,this.bottom=0},n.onAddedToStage=function(t){this.init()},n.onRemovedFromStage=function(t){this.isGetingCode=!1,this.disNum=60},n.init=function(){this.registerRegisBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRegister,this),this.registerGetCodeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetCode,this),this.registerCodeInput.addEventListener(egret.Event.FOCUS_IN,this.onFocusIn,this),this.registerPhoneInput.addEventListener(egret.Event.FOCUS_IN,this.onFocusIn,this),this.registerPsdInput.addEventListener(egret.Event.FOCUS_IN,this.onFocusIn,this),this.registerRepeatPwdInput.addEventListener(egret.Event.FOCUS_IN,this.onFocusIn,this),this.registerPsdInput.addEventListener(egret.Event.FOCUS_OUT,this.onPsdFocusOut,this),this.registerRepeatPwdInput.addEventListener(egret.Event.FOCUS_OUT,this.onPsdFocusOut,this),this.returnLoginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnLoginView,this)},n.onReturnLoginView=function(t){ViewControl.getInstance().dispatch(GameEvents.LOGIN_VIEW,this)},n.onFocusIn=function(t){this.registerErrorNotice.text=""},n.onPsdFocusOut=function(t){this.registerErrorNotice.text="两次密码输入不一致"},n.onRegister=function(t){if(Utils.isPhoneNumber(Number(this.registerPhoneInput.text))||(this.registerErrorNotice.text="手机格式输入错误"),!Utils.isInt(this.registerCodeInput.text))return!1;var e={code:this.registerCodeInput.text,password:this.registerPsdInput.text,repassword:this.registerRepeatPwdInput.text,username:this.registerPhoneInput.text},i=new Http(GlobalData.urlRegister);i.send(JSON.stringify(e)),i.addEventListener(HttpEvents.HTTP_EVENTS,this.onRegisterComplete,this)},n.onRegisterComplete=function(t){console.log("注册请求成功");var e=JSON.parse(t.eventObj),i=e.result,n=e.status;if(0==n){GlobalData.userInfo=JSON.parse(i);var s=GlobalData.userInfo,r=s.uid,o=s.authkey,a=Date.now().toString(),h=(new md5).hex_md5(""+r+a+o);GlobalData.token="&uid="+r+"&autht="+a+"&auths="+h,ViewControl.getInstance().dispatch(GameEvents.PLAYER_STAGE,this)}else this.registerErrorNotice.text=i},n.onGetCode=function(t){if(this.isGetingCode)return!1;if(this.isGetingCode=!0,!Utils.isPhoneNumber(Number(this.registerPhoneInput.text)))return this.registerErrorNotice.text="手机号格式错误",!1;this.addEventListener(egret.Event.ENTER_FRAME,this.onPerTime,this),this.startTime=egret.getTimer(),this.disNum=60,this.registerGetCodeBtn.text=""+this.disNum;var e=this.registerPhoneInput.text,i=new Http(GlobalData.urlGetCode+"&receiver="+e);i.send(),i.addEventListener(HttpEvents.HTTP_EVENTS,this.onGetCodeComplete,this)},n.onGetCodeComplete=function(t){},n.onPerTime=function(t){var e=egret.getTimer();e-this.startTime>this.DIS_TIME&&(this.disNum-=1,this.registerGetCodeBtn.text=""+this.disNum,this.startTime=e),this.disNum<=0&&(this.isGetingCode=!1,this.registerGetCodeBtn.text="获取验证码",this.removeEventListener(egret.Event.ENTER_FRAME,this.onPerTime,this))},e}(eui.Component);egret.registerClass(Register,"Register");